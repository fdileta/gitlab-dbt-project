version: 2

sources:
  - name: saas_usage_ping
    database: '{{ env_var("SNOWFLAKE_LOAD_DATABASE") }}'
    tags: ["product", "service_ping"]
    schema: saas_usage_ping
    loaded_at_field: DATEADD(sec, _uploaded_at, '1970-01-01')
    loader: Airflow
    description: Raw SaaS Usage Ping data generated by /extract/saas_usage_ping/usage_ping.py

    quoting:
      database: true
      schema: false
      identifier: false

    tables:
      - name: instance
        identifier: instance_sql_metrics
      - name: instance_sql_errors
        identifier: instance_sql_errors
      - name: namespace
        identifier: gitlab_dotcom_namespace
      - name: instance_redis_metrics
        identifier: instance_redis_metrics
      - name: instance_combined_metrics
        identifier: instance_combined_metrics
